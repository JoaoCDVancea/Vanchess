<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Artigos - Vanchess</title>
    <link rel="stylesheet" href="../css/navbar.css">
    <link rel="stylesheet" href="../css/artigos.css">
</head>

<body>
    <div id="navbar"></div>
    <div id="conteudo">
        <div class="topo">
            <h1>Artigos</h1>
            <div id="novoArtigo" onclick="popUpEscreverArtigo()">
                <div class="botaoEscrever">
                    <p>Escrever um artigo</p>
                    <img src="../assets/icon/artigos.svg" alt="">
                </div>
            </div>
            <input type="text" placeholder="Procurar Artigo" id="iptProcurarArtigo" oninput="procurarArtigo()">
        </div>
        <div id="popupEscreverArtigo" class="popup-container hide">
            <div class="escreverArtigo">
                <div class="titulo">
                    <h2>Novo Artigo</h2>
                    <h3>Dica: Utilize tags HTML para melhorar seu artigo!</h3>
                </div>
                <input type="text" placeholder="Título do artigo" id="iptTituloArtigo">
                <input type="text" placeholder="Link da Imagem de Capa" id="iptImagemArtigo">
                <textarea placeholder="Escreva aqui..." id="iptTextoArtigo"></textarea>
                <p id="avisoEscreverArtigo"></p>
                <div class="botoes">
                    <div onclick="popUpEscreverArtigo()" class="cancelar">Cancelar</div>
                    <div onclick="verPrevia()" class="proximo">Ver Prévia</div>
                </div>
            </div>
        </div>
        <div id="artigos"></div>
        <div id="popupArtigo" class="popup-container hide" onclick="fecharArtigo()">
            <img src="" alt="">
            <div class="artigo-conteudo">
            </div>
        </div>
    </div>
</body>

</html>
<script src="../js/navbar.js"></script>
<script src="../js/artigos.js"></script>
<script>
    exibirArtigos('artigos');

    function procurarArtigo() {
        let textoProcurar = iptProcurarArtigo.value;
        let texto = '';

        artigosData.forEach((artigo, indice) => {
            if(artigo.titulo.toLowerCase().includes(textoProcurar.toLowerCase())) {
                texto += `
                    <div class="artigo" onclick="lerArtigo(${indice})">
                            <img src="${artigo.imagem}" alt="">
                            <div class="artigo-conteudo">
                                <h1>${artigo.titulo}</h1>
                                <div class="subtitulo">
                                <h2>Escrito por ${artigo.nomeUsuario} </h2>
                                <h2>${artigo.data}</h2>
                            </div>
                            <p>${artigo.texto.substring(0, 200)}...
                            </p>
                        </div>
                    </div>
                `;
            }   
        });

        artigos.innerHTML = texto
    }
</script>