<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desafios - Vanchess</title>
    <link rel="stylesheet" href="../css/logon.css">
</head>

<body>
    <div class="navbar">
        <p></p>
    </div>
    <div class="conteudo">
        <div class="section">
            <div class="head">
                <img src="../assets/imgs/desafios.png" alt="">
                <div class="head-conteudo">
                    <h1>Desafios</h1>
                    <div class="botao" id="botaoPrincipal" onclick="desafioDiario()">
                        <p>Desafio Diário</p>
                        <img src="../assets/icon/botaoDesafios.svg" alt="">
                    </div>
                    <div class="botao">
                        <p>Escolher Desafio</p>
                        <img src="../assets/icon/calendar.svg" alt="">
                    </div>
                    <div class="botao">
                        <p>Desafios Sorteados</p>
                        <img src="../assets/icon/streak.svg" alt="">
                    </div>
                </div>
            </div>
            <div id="desafio"></div>
        </div>
    </div>
</body>

</html>
<script>
    function desafioDiario() {
        fetch("/desafios/desafioDiario", {
            method: "GET",
            headers: {
                "Content-Type": "application/json"
            },
        }).then(
            function (resposta) {
                console.log("ESTOU NO THEN DO desafio diário()!");

                if (resposta.ok) {
                    console.log(resposta);
                    resposta.json().then(json => {
                        let jogador = json.jogador === 0 ? 'Brancas' : 'Pretas';

                        desafio.innerHTML = `
                            <img src="${json.imagem}" alt="">
                            <div class="desafio-conteudo">
                                <div class="jogador">
                                    <div class="circulo"></div>
                                    <p>${jogador} Jogam</p>
                                </div>
                                <div id="botoes">
                                    <div class="botao correto">
                                        <p>Txf2</p>
                                    </div>
                                    <div class="botao errado">
                                        <p>Dh8</p>
                                    </div>
                                    <div class="botao">
                                        <p>Rh1</p>
                                    </div>
                                    <div class="botao">
                                        <p>b3</p>
                                    </div>
                                </div>
                                <div id="explicacao">
                                    <h1>Explicação</h1>
                                    <p>${json.explicacao}</p>
                                </div>
                            </div>
                    `;

                        let element = document.getElementById("explicacao");
                        element.scrollIntoView({ behavior: "smooth" });
                    });
                } else {
                    console.log("Houve um erro ao tentar realizar o login!");

                    resposta.text().then(texto => {
                        console.error(texto);
                    });
                }
            }).catch(function (erro) {
                console.log(erro);
            })

        return false;
    }
</script>